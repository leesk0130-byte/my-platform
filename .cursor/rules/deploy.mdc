---
description: 배포(푸시) 방식 — 코드 반영 후 항상 이렇게 배포한다
alwaysApply: true
---

# 배포는 항상 이렇게

- **배포 대상**: 이 프로젝트 루트 = `my-platform` (OneDrive 바탕 화면). 여기가 GitHub **main** 브랜치에 푸시되는 배포용 폴더다.
- **코드 수정하면 바로 푸시**: 이 프로젝트에서 코드를 수정했으면 **같은 대화 안에서 반드시** `.\push.ps1 "커밋 메시지"` 를 실행해 main 에 푸시한다. 사용자가 "배포해"라고 하지 않아도 코드 변경 후 곧바로 푸시하는 것이 기본 동작이다.

## AI/자동화가 푸시할 때 (필수)

- **반드시** 터미널 명령 실행 시 **working_directory** 를 **이 프로젝트 루트(워크스페이스 경로)** 로 지정한다.
- 명령은 다음만 사용한다: `.\push.ps1 "커밋 메시지"` (메시지 생략 시 `.\push.ps1 "코드 수정 반영"`).
- **같은 명령 안에서 `cd` 하지 말 것.** 한글 경로 때문에 터미널에서 `Set-Location` 이 실패하면 다른 폴더(gxp 등)에서 git 이 실행되어 **main 이 아닌 브랜치로 푸시**될 수 있음. `working_directory` 로만 프로젝트 루트를 지정한다.
- `push.ps1` 은 `--git-dir` / `--work-tree` 로 메인 저장소를 지정하므로, 스크립트가 프로젝트 루트에서 실행되기만 하면 항상 **main** 으로 푸시된다.

## 사용자가 직접 푸시할 때

- 터미널을 **이 프로젝트 루트에서** 연 다음: `.\push.ps1 "커밋 메시지"`.
- gxp 워크트리에서는 `.\push.ps1` 이 worktree 라고 경고하고 종료한다. 배포는 항상 이 폴더(메인 저장소, main)에서만 한다.
