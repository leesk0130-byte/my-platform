<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0f172a">
  <title>ì˜¨ë¼ì¸ ì‡¼í•‘ëª° ë‰´ìŠ¤ | ê°€ë§¹ì ìˆ²</title>
  <meta name="description" content="ì˜¨ë¼ì¸ ì‡¼í•‘ëª°Â·ê°€ë§¹ì  ê´€ë ¨ ë‰´ìŠ¤. PG ìˆ˜ìˆ˜ë£Œ, ì „ììƒê±°ë˜, ì‡¼í•‘ëª° ì •ì±…Â·ì‹œì¥ ì†Œì‹ì„ í•œê³³ì—ì„œ.">
  <link rel="canonical" href="https://my-platform.pages.dev/news.html">
  <meta property="og:type" content="website">
  <meta property="og:title" content="ì˜¨ë¼ì¸ ì‡¼í•‘ëª° ë‰´ìŠ¤ | ê°€ë§¹ì ìˆ²">
  <meta property="og:description" content="ì˜¨ë¼ì¸ ì‡¼í•‘ëª°Â·ê°€ë§¹ì  ê´€ë ¨ ë‰´ìŠ¤. PG ìˆ˜ìˆ˜ë£Œ, ì „ììƒê±°ë˜, ì‡¼í•‘ëª° ì •ì±…Â·ì‹œì¥ ì†Œì‹.">
  <meta property="og:url" content="https://my-platform.pages.dev/news.html">
  <meta property="og:locale" content="ko_KR">
  <meta property="og:image" content="https://my-platform.pages.dev/og-image.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ì˜¨ë¼ì¸ ì‡¼í•‘ëª° ë‰´ìŠ¤ | ê°€ë§¹ì ìˆ²">
  <meta name="twitter:description" content="ì˜¨ë¼ì¸ ì‡¼í•‘ëª°Â·ê°€ë§¹ì  ê´€ë ¨ ë‰´ìŠ¤. PG ìˆ˜ìˆ˜ë£Œ, ì „ììƒê±°ë˜, ì‡¼í•‘ëª° ì •ì±…Â·ì‹œì¥ ì†Œì‹.">
  <meta name="twitter:image" content="https://my-platform.pages.dev/og-image.png">
  <link rel="stylesheet" href="css/common.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3006893636342653" crossorigin="anonymous"></script>
</head>
<body>
  <a href="#main" class="skip-link">ë³¸ë¬¸ìœ¼ë¡œ ê±´ë„ˆë›°ê¸°</a>
  <header>
    <h1><a href="index.html">ê°€ë§¹ì ìˆ²</a></h1>
    <button type="button" class="nav-toggle" aria-label="ë©”ë‰´ ì—´ê¸°" aria-expanded="false" onclick="toggleNav()"><span></span><span></span><span></span></button>
    <nav class="header-nav" id="headerNav" aria-label="ë©”ì¸ ë©”ë‰´">
      <a href="about.html">ê°€ë§¹ì ìˆ²ì´ë€?</a>
      <a href="news.html" class="active">ë‰´ìŠ¤</a>
      <a href="pg.html">PG ìˆ˜ìˆ˜ë£Œ</a>
      <a href="calculator.html">ìˆ˜ìˆ˜ë£Œ ê³„ì‚°ê¸°</a>
      <a href="must-know.html">ê¼­ ì•Œì•„ì•¼ í•  ê²ƒ</a>
      <a href="community.html">ì»¤ë®¤ë‹ˆí‹°</a>
    </nav>
    <div class="header-auth" id="headerAuth" aria-label="ë¡œê·¸ì¸ ìƒíƒœ">
      <span class="header-auth-user" id="headerAuthUser" style="display:none;"><span class="header-user" id="headerUser"></span>
      <button type="button" class="btn btn-outline" id="headerLogoutBtn" onclick="if(window.app&&window.app.logout)window.app.logout();if(typeof updateHeaderAuth==='function')updateHeaderAuth();">ë¡œê·¸ì•„ì›ƒ</button></span>
      <span class="header-auth-guest" id="headerAuthGuest"><button type="button" class="btn btn-outline" id="headerLoginBtn" onclick="openModal('loginModal')">ë¡œê·¸ì¸</button>
      <button type="button" class="btn btn-primary" id="headerSignupBtn" onclick="openModal('signupModal')">íšŒì›ê°€ì…</button></span>
    </div>
  </header>

  <main id="main" class="container page-news">
    <nav class="breadcrumb" aria-label="breadcrumb"><a href="index.html">í™ˆ</a> <span class="bc-sep">/</span> <strong>ë‰´ìŠ¤</strong></nav>
    <div class="hero">
      <h2>ì˜¨ë¼ì¸ ì‡¼í•‘ëª° Â· ê°€ë§¹ì  ë‰´ìŠ¤</h2>
      <p><strong>ì‡¼í•‘ëª°Â·ê²°ì œ(PG)Â·ì „ììƒê±°ë˜</strong> ê´€ë ¨ ë‰´ìŠ¤ë§Œ ëª¨ì€ ì½”ë„ˆì˜ˆìš”. ìˆ˜ìˆ˜ë£Œ ì •ì±…, ë²•Â·ì œë„, ê°€ë§¹ì  ì§€ì› ì†Œì‹ ë“±ì„ í™•ì¸í•˜ì„¸ìš”.</p>
    </div>
    <section class="section">
      <div class="card">
        <h3 class="section-title">ìµœì‹  ë‰´ìŠ¤</h3>
        <div id="news-loading" class="loading-state" aria-live="polite" data-news-view="loading"><div class="loading-spinner"></div><p>ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì´ì—ìš”...</p></div>
        <div id="news-detail" class="news-detail" data-news-view="detail" style="display:none;">
          <h2 id="news-detail-title" class="news-detail-title"></h2>
          <div id="news-detail-meta" class="news-detail-meta"></div>
          <div id="news-detail-body" class="news-detail-body"></div>
          <p style="margin-top:1.5rem;"><a href="news.html" class="btn btn-outline">ëª©ë¡ìœ¼ë¡œ</a></p>
        </div>
        <div id="news-list-wrap" data-news-view="list" style="display:none;"><ul class="news-list" id="news-list"></ul></div>
        <div id="news-empty" class="empty-state" data-news-view="empty" style="display:none;">
          <p class="empty-state-icon" aria-hidden="true">ğŸ“°</p>
          <p class="empty-state-title">ì•„ì§ ë‰´ìŠ¤ê°€ ì—†ì–´ìš”!</p>
          <p class="empty-state-desc">ì ì‹œ í›„ ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì„¸ìš”.</p>
        </div>
        <div id="news-error" class="empty-state" data-news-view="error" style="display:none;">
          <p class="empty-state-title">ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆì–´ìš”</p>
          <p class="empty-state-desc" id="news-error-message">ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.</p>
          <button type="button" class="btn btn-primary" id="news-error-retry">ë‹¤ì‹œ ì‹œë„</button>
        </div>
      </div>
    </section>
  </main>

  <div class="modal-overlay" id="loginModal"><div class="modal"><div class="modal-header"><h3>ë¡œê·¸ì¸</h3><button type="button" class="modal-close" onclick="closeModal('loginModal')">&times;</button></div><div class="modal-body"><form onsubmit="return false;"><div class="form-group"><label>ì´ë©”ì¼</label><input type="email" id="login-email" required></div><div class="form-group"><label>ë¹„ë°€ë²ˆí˜¸</label><input type="password" id="login-pw" required></div><div class="modal-footer"><button type="submit" class="btn btn-primary">ë¡œê·¸ì¸</button></div></form><p class="modal-switch">ì•„ì§ íšŒì›ì´ ì•„ë‹ˆì‹ ê°€ìš”? <a href="#" onclick="closeModal('loginModal');openModal('signupModal');">íšŒì›ê°€ì…</a></p></div></div></div>
  <div class="modal-overlay" id="signupModal"><div class="modal"><div class="modal-header"><h3>íšŒì›ê°€ì…</h3><button type="button" class="modal-close" onclick="closeModal('signupModal')">&times;</button></div><div class="modal-body"><form onsubmit="return false;"><div class="form-group"><label>ì´ë¦„</label><input type="text" id="signup-name" required></div><div class="form-group"><label>ì´ë©”ì¼</label><input type="email" id="signup-email" required></div><div class="form-group"><label>ë¹„ë°€ë²ˆí˜¸</label><input type="password" id="signup-pw" required minlength="8"></div><div class="form-group"><label>ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label><input type="password" id="signup-pw2" required></div><div class="form-group"><label><input type="checkbox" required> ì´ìš©ì•½ê´€ ë™ì˜</label></div><div class="modal-footer"><button type="submit" class="btn btn-primary">ê°€ì…í•˜ê¸°</button></div></form><p class="modal-switch">ì´ë¯¸ íšŒì›ì´ì‹ ê°€ìš”? <a href="#" onclick="closeModal('signupModal');openModal('loginModal');">ë¡œê·¸ì¸</a></p></div></div></div>

  <footer>
    <div class="footer-inner">
      <p><a href="terms.html">ì´ìš©ì•½ê´€</a> | <a href="privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> | <a href="verify.html">ì¸ì¦ ì•ˆë‚´</a></p>
      <p>Â© 2025â€“2026 ê°€ë§¹ì ìˆ². ì˜¨ë¼ì¸ ê°€ë§¹ì  ì •ë³´ & ì»¤ë®¤ë‹ˆí‹°. All rights reserved.</p>
      <div class="footer-contact">
        <h4>ë¬¸ì˜í•˜ê¸°</h4>
        <p><a href="tel:010-9694-4336">010-9694-4336</a></p>
        <p>ì´ìˆ˜ê´‘</p>
        <p><a href="mailto:leesk0130@naver.com">leesk0130@naver.com</a></p>
        <p>ì„œìš¸íŠ¹ë³„ì‹œ ë™ëŒ€ë¬¸êµ¬ ì´ë¬¸ë™ 317-16 201í˜¸</p>
      </div>
    </div>
  </footer>

  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
  <script src="js/config.js"></script>
  <script src="js/app.js"></script>
  <script src="js/auth.js"></script>
  <script>
    function setNewsView(state) {
      console.log('Setting news view state to:', state);
      
      // Hide ALL views first
      document.querySelectorAll('[data-news-view]').forEach(function(el) {
        el.style.display = 'none';
      });
      
      // Show ONLY the current state view
      var currentView = document.querySelector('[data-news-view="' + state + '"]');
      if (currentView) {
        currentView.style.display = 'block';
      }
    }
    (function() {
      // Initialize all views to hidden state
      document.querySelectorAll('[data-news-view]').forEach(function(el) { 
        el.style.display = 'none'; 
      });
      
      var params = new URLSearchParams(location.search);
      var id = params.get('id');
      var listEl = document.getElementById('news-list');
      var detailEl = document.getElementById('news-detail');
      if (id && window.app.getNewsById(id)) {
        var article = window.app.getNewsById(id);
        if (article && detailEl) {
          setNewsView('detail');
          document.getElementById('news-detail-title').textContent = article.title;
          document.getElementById('news-detail-meta').textContent = (article.date || '') + (article.source ? ' Â· ' + article.source : '');
          // Clean up markdown and broken text
          var body = (article.body || '(ë‚´ìš© ì—†ìŒ)')
            .replace(/^#+\s*/gm, '') // Remove markdown headers
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Convert **bold** to <strong>
            .replace(/\*(.*?)\*/g, '<em>$1</em>') // Convert *italic* to <em>
            .replace(/\n\n+/g, '\n\n'); // Normalize line breaks
          
          document.getElementById('news-detail-body').innerHTML = body.split(/\n\n+/).map(function(p) { 
            return '<p class="news-detail-p">' + p.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\n/g, '<br>').replace(/&lt;strong&gt;/g, '<strong>').replace(/&lt;\/strong&gt;/g, '</strong>').replace(/&lt;em&gt;/g, '<em>').replace(/&lt;\/em&gt;/g, '</em>') + '</p>'; 
          }).join('');
          return;
        }
      }
      if (!listEl) return;
      
      console.log('Loading news list');
      setNewsView('loading');
      
      window.app.fetchNews(20, 0, function(err, items) {
        if (err) {
          console.log('Error loading news:', err);
          setNewsView('error');
          var errorMsg = document.getElementById('news-error-message');
          if (errorMsg) errorMsg.textContent = err;
          return;
        }
        
        console.log('News loaded successfully:', items ? items.length : 0, 'items');
        
        if (items && items.length > 0) {
          window.app.renderNews('news-list', items);
          setNewsView('list');
        } else {
          console.log('No news items, showing empty state');
          setNewsView('empty');
        }
      });
      var retryBtn = document.getElementById('news-error-retry');
      if (retryBtn) {
        retryBtn.onclick = function() { 
          console.log('Retrying to load news');
          setNewsView('loading'); 
          
          window.app.fetchNews(20, 0, function(err, items) {
            if (err) {
              console.log('Retry failed:', err);
              setNewsView('error');
              var errorMsg = document.getElementById('news-error-message');
              if (errorMsg) errorMsg.textContent = err;
              return;
            }
            
            if (items && items.length > 0) {
              window.app.renderNews('news-list', items);
              setNewsView('list');
            } else {
              setNewsView('empty');
            }
          }); 
        };
      }
    })();
    function openModal(id) {
      document.getElementById(id).classList.add('is-open');
      document.body.style.overflow = 'hidden';
    }
    function closeModal(id) {
      document.getElementById(id).classList.remove('is-open');
      document.body.style.overflow = '';
    }
    document.querySelectorAll('.modal-overlay').forEach(function(el) {
      el.addEventListener('click', function(e) { if (e.target === el) closeModal(el.id); });
    });
    var loginForm = document.querySelector('#loginModal form');
    if (loginForm) {
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        var email = loginForm.querySelector('input[type=email]').value;
        var pw = loginForm.querySelector('input[type=password]').value;
        window.app.login(email, pw, function(err) {
          if (err) { alert(err); return; }
          closeModal('loginModal');
        });
      });
    }
    var signupForm = document.querySelector('#signupModal form');
    if (signupForm) {
      signupForm.addEventListener('submit', function(e) {
        e.preventDefault();
        var inputs = signupForm.querySelectorAll('input');
        var name = inputs[0].value;
        var email = inputs[1].value;
        var pw = inputs[2].value;
        var pw2 = inputs[3].value;
        if (pw !== pw2) { alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ìš”.'); return; }
        window.app.signup(name, email, pw, function(err) {
          if (err) { alert(err); return; }
          closeModal('signupModal');
        });
      });
    }
    function toggleNav() {
      var nav = document.getElementById('headerNav');
      var btn = document.querySelector('.nav-toggle');
      if (!nav || !btn) return;
      var open = nav.classList.toggle('is-open');
      btn.setAttribute('aria-expanded', open);
      btn.setAttribute('aria-label', open ? 'ë©”ë‰´ ë‹«ê¸°' : 'ë©”ë‰´ ì—´ê¸°');
    }
  </script>
</body>
</html>
