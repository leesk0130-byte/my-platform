<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0f172a">
  <title>저장한 계산 목록 | 가맹점숲</title>
  <meta name="description" content="수수료 계산기에서 저장한 계산 목록입니다.">
  <link rel="canonical" href="https://my-platform.pages.dev/calculator-saved.html">
  <link rel="stylesheet" href="css/common.css">
  <script src="js/analytics-stub.js"></script>
</head>
<body>
  <a href="#main" class="skip-link">본문으로 건너뛰기</a>
  <header>
    <h1><a href="index.html">가맹점숲</a></h1>
    <button type="button" class="nav-toggle" aria-label="메뉴 열기" aria-expanded="false" data-toggle-nav><span></span><span></span><span></span></button>
    <nav class="header-nav" id="headerNav" aria-label="메인 메뉴">
      <a href="community.html">커뮤니티</a>
      <a href="pg.html">PG 수수료</a>
      <a href="calculator.html" class="active">수수료 비교 계산기</a>
      <a href="news.html">최신 공지/뉴스</a>
      <a href="verify.html">인증/제휴 문의</a>
    </nav>
    <div class="header-auth" id="headerAuth" aria-label="로그인 상태">
      <div id="auth-actions"></div>
    </div>
  </header>

  <main id="main" class="container">
    <nav class="breadcrumb" aria-label="breadcrumb"><a href="index.html">홈</a> <span class="bc-sep">/</span> <a href="calculator.html">결제수수료 계산기</a> <span class="bc-sep">/</span> <strong>저장한 계산</strong></nav>
    <div class="hero">
      <h2>저장한 계산 목록</h2>
      <p>계산기에서 저장한 조건을 불러와 다시 계산할 수 있어요.</p>
    </div>
    <section class="section">
      <div class="card card-content">
        <ul id="calc-saved-list" class="feed-list" aria-label="저장한 계산 목록"></ul>
        <div id="calc-saved-empty" class="empty-state" style="display:none;">
          <p class="empty-state-icon" aria-hidden="true">&#128197;</p>
          <p class="empty-state-title">저장한 계산이 없어요</p>
          <p class="empty-state-desc">계산기에서 결과를 저장해 보세요.</p>
          <a href="calculator.html" class="btn btn-primary">계산기로 가기</a>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-inner">
      <p><a href="about.html">가맹점숲이란?</a> | <a href="must-know.html">꼭 알아야 할 것</a> | <a href="terms.html">이용약관</a> | <a href="privacy.html">개인정보처리방침</a> | <a href="verify.html">인증/제휴 문의</a></p>
      <p>© 2025–2026 가맹점숲. All rights reserved.</p>
      <div class="footer-contact">
        <h4>문의</h4>
        <p>이메일: <a href="mailto:leesk0130@naver.com?subject=가맹점숲 문의">leesk0130@naver.com</a></p>
        <p class="footer-hours">운영 시간: 평일 09:00–18:00 (답변은 1–2 영업일 내)</p>
      </div>
    </div>
  </footer>

  <script>
    (function() {
      if (window.trackEvent) window.trackEvent('pageview', { page: 'calculator-saved' });
      var KEY = 'gmp_calc_saved';
      var listEl = document.getElementById('calc-saved-list');
      var emptyEl = document.getElementById('calc-saved-empty');
      var list = [];
      try {
        var raw = localStorage.getItem(KEY);
        list = raw ? JSON.parse(raw) : [];
      } catch (e) {}
      if (!list.length) {
        if (listEl) listEl.innerHTML = '';
        if (emptyEl) emptyEl.style.display = 'block';
      } else {
        if (emptyEl) emptyEl.style.display = 'none';
        listEl.innerHTML = list.map(function(item) {
          var dateStr = item.createdAt ? new Date(item.createdAt).toLocaleDateString('ko-KR', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' }) : '';
          var typeLabel = (item.params && item.params.type === 'compare') ? ' (A vs B)' : '';
          return '<li class="feed-item feed-item-row"><span class="feed-title-text">' + (item.name || '저장') + typeLabel + '</span><span class="feed-meta">' + dateStr + '</span><a href="calculator.html?load=' + encodeURIComponent(item.id) + '" class="btn btn-outline btn-sm">불러오기</a></li>';
        }).join('');
      }
      var nav = document.getElementById('headerNav');
      var btn = document.querySelector('.nav-toggle');
      if (btn && nav) btn.addEventListener('click', function() {
        var open = nav.classList.toggle('is-open');
        btn.setAttribute('aria-expanded', open);
        btn.setAttribute('aria-label', open ? '메뉴 닫기' : '메뉴 열기');
      });
    })();
  </script>
</body>
</html>
