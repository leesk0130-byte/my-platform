<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0f172a">
  <title>ê°€ë§¹ì  ì»¤ë®¤ë‹ˆí‹° | ê°€ë§¹ì ìˆ² - ì˜¨ë¼ì¸ ì‡¼í•‘ëª° ì •ë³´ ë‚˜ëˆ”</title>
  <meta name="description" content="ì˜¨ë¼ì¸ ê°€ë§¹ì Â·ì‡¼í•‘ëª° ì»¤ë®¤ë‹ˆí‹°. PG ìˆ˜ìˆ˜ë£ŒÂ·ì •ì‚°Â·ìš´ì˜ ì •ë³´ ë‚˜ëˆ„ê³  ì§ˆë¬¸í•˜ëŠ” ê°€ë§¹ì ìˆ² ê²Œì‹œíŒ.">
  <meta name="keywords" content="ê°€ë§¹ì ìˆ², ê°€ë§¹ì  ì»¤ë®¤ë‹ˆí‹°, ì˜¨ë¼ì¸ ê°€ë§¹ì , ì‡¼í•‘ëª° ì»¤ë®¤ë‹ˆí‹°, PG ìˆ˜ìˆ˜ë£Œ">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://my-platform.pages.dev/community.html">
  <meta property="og:type" content="website">
  <meta property="og:title" content="ì»¤ë®¤ë‹ˆí‹° | ê°€ë§¹ì ìˆ²">
  <meta property="og:description" content="ì˜¨ë¼ì¸ ê°€ë§¹ì Â·ì‡¼í•‘ëª° ì»¤ë®¤ë‹ˆí‹°. ìˆ˜ìˆ˜ë£ŒÂ·ì •ì‚°Â·ìš´ì˜ ì •ë³´ ë‚˜ëˆ„ê³  ì§ˆë¬¸í•˜ëŠ” ê²Œì‹œíŒ.">
  <meta property="og:url" content="https://my-platform.pages.dev/community.html">
  <meta property="og:locale" content="ko_KR">
  <meta property="og:image" content="https://my-platform.pages.dev/og-image.svg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ì»¤ë®¤ë‹ˆí‹° | ê°€ë§¹ì ìˆ²">
  <meta name="twitter:description" content="ì˜¨ë¼ì¸ ê°€ë§¹ì Â·ì‡¼í•‘ëª° ì»¤ë®¤ë‹ˆí‹°. ìˆ˜ìˆ˜ë£ŒÂ·ì •ì‚°Â·ìš´ì˜ ì •ë³´ ë‚˜ëˆ„ê³  ì§ˆë¬¸í•˜ëŠ” ê²Œì‹œíŒ.">
  <meta name="twitter:image" content="https://my-platform.pages.dev/og-image.svg">
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"WebPage","name":"ê°€ë§¹ì  ì»¤ë®¤ë‹ˆí‹° | ê°€ë§¹ì ìˆ²","description":"ì˜¨ë¼ì¸ ê°€ë§¹ì Â·ì‡¼í•‘ëª° ì»¤ë®¤ë‹ˆí‹°. ìˆ˜ìˆ˜ë£ŒÂ·ì •ì‚°Â·ìš´ì˜ ì •ë³´ ë‚˜ëˆ„ê³  ì§ˆë¬¸í•˜ëŠ” ê²Œì‹œíŒ.","url":"https://my-platform.pages.dev/community.html","isPartOf":{"@type":"WebSite","name":"ê°€ë§¹ì ìˆ²","url":"https://my-platform.pages.dev/"}}
  </script>
  <link rel="stylesheet" href="css/common.css">
  <script src="js/analytics-stub.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3006893636342653" crossorigin="anonymous"></script>
</head>
<body>
  <a href="#main" class="skip-link">ë³¸ë¬¸ìœ¼ë¡œ ê±´ë„ˆë›°ê¸°</a>
  <header>
    <h1><a href="index.html">ê°€ë§¹ì ìˆ²</a></h1>
    <button type="button" class="nav-toggle" aria-label="ë©”ë‰´ ì—´ê¸°" aria-expanded="false" data-toggle-nav><span></span><span></span><span></span></button>
    <nav class="header-nav" id="headerNav" aria-label="ë©”ì¸ ë©”ë‰´">
      <a href="community.html" class="active">ì»¤ë®¤ë‹ˆí‹°</a>
      <a href="pg.html">PG ìˆ˜ìˆ˜ë£Œ</a>
      <a href="calculator.html">ìˆ˜ìˆ˜ë£Œ ë¹„êµ ê³„ì‚°ê¸°</a>
      <a href="news.html">ìµœì‹  ê³µì§€/ë‰´ìŠ¤</a>
      <a href="verify.html">ì¸ì¦/ì œíœ´ ë¬¸ì˜</a>
    </nav>
    <div class="header-auth" id="headerAuth" aria-label="ë¡œê·¸ì¸ ìƒíƒœ">
      <div id="auth-actions"></div>
    </div>
  </header>

  <main id="main" class="container page-community">
    <nav class="breadcrumb" aria-label="breadcrumb"><a href="index.html">í™ˆ</a> <span class="bc-sep">/</span> <strong>ì»¤ë®¤ë‹ˆí‹°</strong></nav>
    <div class="community-intro" style="padding:1rem 0 0.5rem;">
      <h2 style="font-size:clamp(1.1rem,3.5vw,1.5rem);margin-bottom:6px;">ê°€ë§¹ì  ì»¤ë®¤ë‹ˆí‹°</h2>
      <p style="font-size:0.9375rem;line-height:1.65;color:var(--color-text-muted,#64748b);max-width:64ch;">ì˜¨ë¼ì¸ ì‡¼í•‘ëª°Â·ê°€ë§¹ì  ì‚¬ì¥ë‹˜ë“¤ì´ PG ìˆ˜ìˆ˜ë£Œ, ì •ì‚°, ì˜¤ë¥˜, ìš´ì˜ ë…¸í•˜ìš°ë¥¼ ë‚˜ëˆ„ëŠ” ê³³ì…ë‹ˆë‹¤. ìˆ˜ìˆ˜ë£Œ/ì •ì‚°, ììœ ê²Œì‹œíŒ, Q&amp;A, ì •ë³´ê³µìœ  ì¹´í…Œê³ ë¦¬ë¡œ ìš´ì˜ë©ë‹ˆë‹¤.</p>
    </div>
    <section class="section community-section">
      <!-- Famous Community 2-Column Layout -->
      <div class="community-layout">
        <!-- Left Column (Main) -->
        <div class="community-main">
          <div class="card">
            <div class="board-tabs">
              <a href="community.html" class="active">ì „ì²´</a>
              <a href="community.html?board=free">ììœ ê²Œì‹œíŒ</a>
              <a href="community.html?board=fee">ìˆ˜ìˆ˜ë£Œ/ì •ì‚°</a>
              <a href="community.html?board=qna">ì§ˆë¬¸ë‹µë³€</a>
              <a href="community.html?board=info">ì •ë³´ê³µìœ </a>
            </div>
            <div class="board-toolbar" id="board-toolbar">
              <div class="board-search">
                <label for="board-search-input" class="sr-only">ì œëª©ìœ¼ë¡œ ê²€ìƒ‰</label>
                <input type="search" id="board-search-input" placeholder="ì œëª© ê²€ìƒ‰" aria-label="ì œëª© ê²€ìƒ‰" autocomplete="off">
                <button type="button" class="btn btn-outline btn-sm" id="board-search-btn" aria-label="ê²€ìƒ‰ ì‹¤í–‰">ì°¾ê¸°</button>
              </div>
              <div class="board-sort">
                <label for="board-sort-select" class="sr-only">ì •ë ¬</label>
                <select id="board-sort-select" aria-label="ì •ë ¬ ê¸°ì¤€">
                  <option value="latest">ìµœì‹ ìˆœ</option>
                  <option value="hits">ì¡°íšŒìˆœ</option>
                  <option value="comments">ëŒ“ê¸€ìˆœ</option>
                </select>
              </div>
            </div>
            <div class="board-actions" style="justify-content:flex-end;">
              <a href="bookmarks.html" class="btn btn-ghost btn-sm">ì €ì¥í•œ ê¸€</a>
              <a href="write.html" class="btn btn-primary board-actions-write-mobile">ê¸€ì“°ê¸°</a>
            </div>
            <div id="board-notice" class="board-notice" aria-label="ê³µì§€" style="display:none;"></div>
            <div id="page-root" aria-live="polite"></div>
          </div>
        </div>
        
        <!-- Right Column (Sidebar) -->
        <div class="community-sidebar">
          <!-- Popular Posts -->
          <div class="sidebar-widget">
            <h3 class="sidebar-widget-title">ğŸ”¥ ì¸ê¸°ê¸€</h3>
            <ul class="sidebar-list" id="popular-posts">
              <!-- ë™ì ìœ¼ë¡œ ë¡œë“œë¨ -->
            </ul>
          </div>

          <!-- Notices -->
          <div class="sidebar-widget">
            <h3 class="sidebar-widget-title">ğŸ“¢ ê³µì§€ì‚¬í•­</h3>
            <ul class="sidebar-list">
              <li class="sidebar-item">
                <a href="community.html?id=4" class="sidebar-link">
                  <span class="sidebar-title">ê²°ì œ ì˜¤ë¥˜ ì‹œ PGì‚¬ ëŒ€ì‘ íŒ ê³µìœ í•©ë‹ˆë‹¤</span>
                  <span class="sidebar-meta">ìš´ì˜ì Â· 2ì¼ ì „</span>
                </a>
              </li>
            </ul>
          </div>

          <!-- Writing Guide -->
          <div class="sidebar-widget">
            <h3 class="sidebar-widget-title">âœï¸ ì‘ì„± ê°€ì´ë“œ</h3>
            <div class="sidebar-content">
              <ul class="guide-list">
                <li>â€¢ ìˆ˜ìˆ˜ë£ŒÂ·ì •ì‚° ê´€ë ¨ ì§ˆë¬¸ì€ <strong>êµ¬ì²´ì ì¸ ìƒí™©</strong>ì„ í¬í•¨í•´ ì£¼ì„¸ìš”</li>
                <li>â€¢ PGì‚¬ëª…, ì—…ì¢…, ì›” ë§¤ì¶œ ê·œëª¨ë¥¼ ëª…ì‹œí•˜ë©´ ë” ì •í™•í•œ ë‹µë³€ì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”</li>
                <li>â€¢ ê°œì¸ì •ë³´(ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸, ê³„ì¢Œë²ˆí˜¸ ë“±)ëŠ” ì ˆëŒ€ ê³µê°œí•˜ì§€ ë§ˆì„¸ìš”</li>
              </ul>
            </div>
          </div>

          <!-- Verification Guide -->
          <div class="sidebar-widget">
            <h3 class="sidebar-widget-title">âœ… ì¸ì¦ ì•ˆë‚´</h3>
            <div class="sidebar-content">
              <p class="guide-text">
                <strong>ì¸ì¦ëœ ì•„ì´ë””</strong>ë¡œ ë” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì •ë³´ë¥¼ ë‚˜ëˆ„ì„¸ìš”.
              </p>
              <p class="guide-text">
                4ëŒ€ë³´í—˜ ê°€ì…ì´ë ¥ì„ <a href="mailto:leesk0130@naver.com">leesk0130@naver.com</a>ìœ¼ë¡œ ë³´ë‚´ì£¼ì‹œë©´ ì¸ì¦í•´ ë“œë ¤ìš”.
              </p>
              <a href="verify.html" class="btn btn-outline btn-sm">ìì„¸íˆ ë³´ê¸°</a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>


  <footer>
    <div class="footer-inner">
      <p><a href="about.html">ê°€ë§¹ì ìˆ²ì´ë€?</a> | <a href="must-know.html">ê¼­ ì•Œì•„ì•¼ í•  ê²ƒ</a> | <a href="terms.html">ì´ìš©ì•½ê´€</a> | <a href="privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> | <a href="verify.html">ì¸ì¦/ì œíœ´ ë¬¸ì˜</a></p>
      <p>Â© 2025â€“2026 ê°€ë§¹ì ìˆ². ì˜¨ë¼ì¸ ê°€ë§¹ì  ì •ë³´ & ì»¤ë®¤ë‹ˆí‹°. All rights reserved.</p>
      <div class="footer-contact">
        <h4>ë¬¸ì˜</h4>
        <p>ì´ë©”ì¼: <a href="mailto:leesk0130@naver.com?subject=ê°€ë§¹ì ìˆ² ë¬¸ì˜">leesk0130@naver.com</a></p>
        <p class="footer-hours">ìš´ì˜ ì‹œê°„: í‰ì¼ 09:00â€“18:00 (ë‹µë³€ì€ 1â€“2 ì˜ì—…ì¼ ë‚´)</p>
      </div>
    </div>
  </footer>

  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
  <script src="js/config.js"></script>
  <script src="js/bookmarks.js"></script>
  <script src="js/app.js"></script>
  <script src="js/auth.js"></script>
  <script>
    (function() {
      if (window.trackEvent) window.trackEvent('pageview', { page: 'community' });

      /* â”€â”€ page-root ë‹¨ì¼ ë Œë” í—¬í¼ â”€â”€ */
      var pageRoot = document.getElementById('page-root');
      function setRoot(html) { if (pageRoot) pageRoot.innerHTML = html; }

      function renderLoading() {
        setRoot('<div class="loading-state"><div class="loading-spinner"></div><p>ê¸€ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì´ì—ìš”...</p></div>');
      }
      function renderEmpty() {
        setRoot('<div class="empty-state"><p class="empty-state-icon" aria-hidden="true">\uD83D\uDCDD</p><p class="empty-state-title">ì•„ì§ ì‘ì„±ëœ ê¸€ì´ ì—†ì–´ìš”!</p><p class="empty-state-desc">ì²« ê¸€ì„ ì‘ì„±í•´ ë³´ì„¸ìš”.</p><a href="write.html" class="btn btn-primary">ì²« ê¸€ ì“°ê¸°</a></div>');
      }
      function renderNotFound() {
        setRoot('<div class="empty-state" style="margin:1.5rem 2rem;"><p class="empty-state-icon" aria-hidden="true">\uD83D\uDD0D</p><p class="empty-state-title">ê¸€ì´ ì—†ê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤</p><p class="empty-state-desc">ìš”ì²­í•˜ì‹  ê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”.</p><a href="community.html" class="btn btn-primary">ëª©ë¡ìœ¼ë¡œ</a></div>');
      }
      function renderError(msg) {
        setRoot('<div class="empty-state"><p class="empty-state-title">ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë‚¬ì–´ìš”</p><p class="empty-state-desc">' + (msg || 'ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.') + '</p><button type="button" class="btn btn-primary" id="view-error-retry">ë‹¤ì‹œ ì‹œë„</button></div>');
        var btn = document.getElementById('view-error-retry');
        if (btn) btn.onclick = function() { loadList(false); };
      }
      function renderList(items, hasMore) {
        var listHtml = window.app && window.app.renderPostsHTML ? window.app.renderPostsHTML(items, 'community.html?id=', true) : '';
        if (!listHtml) {
          listHtml = (items || []).map(function(p) {
            return '<li class="feed-item"><a href="community.html?id=' + (p.id || '') + '" class="feed-title-link">' + (p.title || '') + '</a></li>';
          }).join('');
        }
        var moreBtn = hasMore ? '<div class="board-more-wrap"><button type="button" class="btn btn-outline" id="posts-more-btn">ë”ë³´ê¸°</button></div>' : '';
        setRoot('<ul class="feed-list" id="community-list" aria-label="ê²Œì‹œê¸€ ëª©ë¡">' + listHtml + '</ul>' + moreBtn);
        var mb = document.getElementById('posts-more-btn');
        if (mb) mb.onclick = function() {
          currentShown = Math.min(currentShown + PAGE_SIZE, allFilteredItems.length);
          renderPage();
        };
        /* renderPostsë¥¼ ì‚¬ìš©í•œ ê²½ìš° ì‹¤ì œ ë Œë” */
        if (window.app && window.app.renderPosts) {
          window.app.renderPosts('community-list', items, 'community.html?id=', true);
        }
      }

      /* â”€â”€ ë³´ë“œ UI í‘œì‹œ/ìˆ¨ê¹€ (detailì—ì„œëŠ” íƒ­/íˆ´ë°” ìˆ¨ê¹€) â”€â”€ */
      function setListUI(show) {
        var card = document.querySelector('.community-section .card');
        if (!card) return;
        var tabs    = card.querySelector('.board-tabs');
        var toolbar = card.querySelector('#board-toolbar');
        var actions = card.querySelector('.board-actions');
        var notice  = document.getElementById('board-notice');
        if (tabs)    tabs.style.display    = show ? '' : 'none';
        if (toolbar) toolbar.style.display = show ? 'flex' : 'none';
        if (actions) actions.style.display = show ? 'flex' : 'none';
        if (notice && !show) notice.style.display = 'none';
      }

      document.addEventListener('click', function(e) {
        var noticeBtn = e.target && e.target.closest && e.target.closest('.notice-toggle-btn');
        if (noticeBtn) {
          e.preventDefault();
          e.stopPropagation();
          var id = noticeBtn.getAttribute('data-post-id');
          if (id && window.app && window.app.togglePostNotice) {
            if (!window.app.isOperator || !window.app.isOperator()) { alert('ìš´ì˜ìë§Œ ê³µì§€ ì„¤ì •í•  ìˆ˜ ìˆì–´ìš”.'); return; }
            window.app.togglePostNotice(id, function(err) {
              if (err) { alert(err); return; }
              var loadListFn = typeof loadList === 'function' ? loadList : (window.loadList || function() { location.reload(); });
              loadListFn(false);
            });
          }
          return;
        }
        var postDeleteBtn = e.target && e.target.closest && e.target.closest('.post-delete-btn');
        if (postDeleteBtn) {
          e.preventDefault();
          e.stopPropagation();
          var id = postDeleteBtn.getAttribute('data-post-id');
          if (id && window.app && window.app.deletePost) {
            if (!confirm('ì •ë§ ì‚­ì œí• ê¹Œìš”?')) return;
            window.app.deletePost(id, function(err) {
              if (err) { alert(err); return; }
              location.href = 'community.html';
            });
          }
          return;
        }
        var btn = e.target && e.target.closest && e.target.closest('.comment-delete-btn');
        if (!btn) return;
        e.preventDefault();
        var postId = btn.getAttribute('data-post-id');
        var commentId = btn.getAttribute('data-comment-id');
        if (!postId || !commentId || !window.app || !window.app.deleteComment) return;
        window.app.deleteComment(postId, commentId, function() {
          window.app.getComments(postId, function(_, comments) {
            window.app.renderComments('comment-list', comments, { postId: postId, canDelete: window.app.isOperator && window.app.isOperator() });
            var countEl = document.getElementById('comment-count');
            if (countEl) countEl.textContent = (comments ? comments.length : 0);
          });
        });
      });

      var params = new URLSearchParams(location.search);
      var postId = params.get('id');
      var listEl = document.getElementById('community-list');
      var detailEl = document.getElementById('view-detail');
      var currentDetailPostId = null;
      var viewState = 'loading';
      
      // Initialize all views to hidden state
      var allViews = document.querySelectorAll('[data-view]');
      allViews.forEach(function(el) { el.style.display = 'none'; });

      /* â”€â”€ detail view ë Œë” (page-rootì— innerHTML) â”€â”€ */
      function renderDetail(post) {
        setListUI(false);
        var verified = (post.verified === true || (window.app && window.app.isAuthorVerified && window.app.isAuthorVerified(post.author)));
        var badgeHtml = (window.app && window.app.verifiedBadgeHtml) ? window.app.verifiedBadgeHtml(verified, post.author) : '';
        var canEdit = window.app && window.app.canEditPost && window.app.canEditPost(post);
        var actionHtml = canEdit
          ? '<div class="post-detail-actions" style="margin-top:0.5rem;"><a href="edit.html?id=' + encodeURIComponent(post.id) + '" class="btn btn-outline btn-sm">ìˆ˜ì •</a> <button type="button" class="post-delete-btn btn btn-outline btn-sm" data-post-id="' + (post.id || '') + '">ì‚­ì œ</button></div>'
          : '';
        var saved = window.Bookmarks ? window.Bookmarks.isBookmarked(post.id) : false;
        var bodyText = (post.body || '(ë‚´ìš© ì—†ìŒ)').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\n/g,'<br>');
        setRoot(
          '<div class="post-detail-wrap">' +
            '<div class="post-detail-nav"><a href="community.html" class="btn btn-outline btn-back">\u2190 ëª©ë¡ìœ¼ë¡œ</a></div>' +
            '<article class="post-detail-card" aria-label="ê¸€ ë³¸ë¬¸">' +
              '<header class="post-detail-header">' +
                '<p class="post-detail-title-label" aria-hidden="true">ì œëª©</p>' +
                '<h1 id="post-detail-title" class="post-detail-title">' + (post.title || '') + '</h1>' +
                '<div id="post-detail-meta" class="post-detail-meta">' + (post.author || 'ìµëª…') + badgeHtml + ' &middot; ' + (post.date || '') + '</div>' +
                '<div class="post-detail-actions post-detail-bookmark-row" style="margin-top:0.5rem;" id="post-detail-bookmark">' +
                  '<button type="button" class="btn btn-outline btn-sm" id="post-bookmark-btn" data-post-id="' + (post.id || '') + '">' + (saved ? 'ì €ì¥ ì·¨ì†Œ' : 'ì €ì¥') + '</button>' +
                  ' <button type="button" class="btn btn-ghost btn-sm" id="post-share-link-btn" aria-label="ë§í¬ ë³µì‚¬">ë§í¬ ë³µì‚¬</button>' +
                '</div>' +
                actionHtml +
              '</header>' +
              '<div class="post-body-wrap" aria-label="ë³¸ë¬¸ ë‚´ìš©">' +
                '<p class="post-body-label">ë³¸ë¬¸</p>' +
                '<div id="post-detail-body" class="post-body">' + bodyText + '</div>' +
              '</div>' +
            '</article>' +
            '<section class="comment-section" id="comment-section" aria-label="ëŒ“ê¸€">' +
              '<h2 class="comment-section-title">ëŒ“ê¸€ <span class="comment-count" id="comment-count">0</span></h2>' +
              '<ul class="comment-list" id="comment-list"></ul>' +
              '<div class="comment-form-wrap">' +
                '<p class="comment-form-label">ëŒ“ê¸€ ì‘ì„±</p>' +
                '<form id="comment-form" class="comment-form">' +
                  '<div class="form-group comment-nickname-row"><span class="comment-nickname-label">ë‹‰ë„¤ì„</span><span class="comment-nickname-value" id="comment-nickname-value">\u2014</span></div>' +
                  '<div class="form-group form-group-checkbox"><label for="comment-anonymous"><input type="checkbox" id="comment-anonymous"> ìµëª…ìœ¼ë¡œ ì‘ì„±</label></div>' +
                  '<div class="form-group"><label for="comment-body" class="sr-only">ëŒ“ê¸€ ë‚´ìš©</label><textarea id="comment-body" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”" required rows="3"></textarea></div>' +
                  '<div id="comment-error" class="msg-error" style="display:none;"></div>' +
                  '<div class="form-actions"><button type="submit" class="btn btn-primary">ëŒ“ê¸€ ë“±ë¡</button></div>' +
                '</form>' +
              '</div>' +
            '</section>' +
            '<section class="related-posts-section" id="related-posts-section" aria-label="ê´€ë ¨ ê¸€" style="display:none;margin-top:1.5rem;">' +
              '<h2 class="section-title">ê´€ë ¨ ê¸€</h2>' +
              '<ul class="feed-list" id="related-posts-list"></ul>' +
            '</section>' +
            '<div class="post-detail-nav post-detail-nav-bottom"><a href="community.html" class="btn btn-outline btn-back">\u2190 ëª©ë¡ìœ¼ë¡œ</a></div>' +
          '</div>'
        );

        /* ì´ë²¤íŠ¸ ë°”ì¸ë”© */
        var bookmarkBtn = document.getElementById('post-bookmark-btn');
        if (bookmarkBtn) bookmarkBtn.addEventListener('click', function() {
          var id = bookmarkBtn.getAttribute('data-post-id');
          if (!id || !window.Bookmarks) return;
          var ns = window.Bookmarks.toggle(id);
          bookmarkBtn.textContent = ns ? 'ì €ì¥ ì·¨ì†Œ' : 'ì €ì¥';
        });
        var shareBtn = document.getElementById('post-share-link-btn');
        if (shareBtn) shareBtn.addEventListener('click', function() {
          try { navigator.clipboard.writeText(location.href); shareBtn.textContent = 'ë³µì‚¬ë¨'; setTimeout(function() { shareBtn.textContent = 'ë§í¬ ë³µì‚¬'; }, 2000); } catch(e) {}
        });

        currentDetailPostId = post.id;
        var currentPostId = post.id;

        function drawComments() {
          if (!document.getElementById('comment-list')) return;
          window.app.getComments(currentPostId, function(_, comments) {
            window.app.renderComments('comment-list', comments, { postId: currentPostId, canDelete: window.app.isOperator && window.app.isOperator() });
            var ce = document.getElementById('comment-count');
            if (ce) ce.textContent = comments ? comments.length : 0;
          });
        }
        drawComments();
        setTimeout(drawComments, 700);
        setTimeout(drawComments, 1800);

        var nicknameEl = document.getElementById('comment-nickname-value');
        var anonCheck  = document.getElementById('comment-anonymous');
        if (nicknameEl) {
          var cu = window.app.getUser && window.app.getUser();
          if (window.app.isLoggedIn && window.app.isLoggedIn() && cu && cu.name) {
            nicknameEl.textContent = cu.name;
          } else {
            nicknameEl.textContent = 'ë¹„íšŒì› (ìµëª…)';
            if (anonCheck) anonCheck.checked = true;
          }
        }
        var commentForm = document.getElementById('comment-form');
        if (commentForm) {
          commentForm.onsubmit = function(e) {
            e.preventDefault();
            var body = (document.getElementById('comment-body') || {}).value || '';
            body = body.trim();
            var errEl = document.getElementById('comment-error');
            if (!body) { if (errEl) { errEl.textContent = 'ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.'; errEl.style.display = 'block'; } return; }
            if (errEl) errEl.style.display = 'none';
            var author = 'ìµëª…';
            if (anonCheck && !anonCheck.checked) {
              var u2 = window.app.getUser && window.app.getUser();
              if (u2 && u2.name) author = u2.name;
            }
            window.app.addComment(currentPostId, { author: author, body: body }, function(err2) {
              if (err2) { if (errEl) { errEl.textContent = err2; errEl.style.display = 'block'; } return; }
              var ta = document.getElementById('comment-body');
              if (ta) ta.value = '';
              drawComments();
            });
          };
        }

        if (window.app && window.app.getRelatedPosts) {
          window.app.getRelatedPosts(currentPostId, 5, function(err3, related) {
            var sec = document.getElementById('related-posts-section');
            var rl  = document.getElementById('related-posts-list');
            if (sec) sec.style.display = (related && related.length) ? 'block' : 'none';
            if (rl && related && related.length) window.app.renderPosts('related-posts-list', related, 'community.html?id=', true);
          });
        }
      }

      /* authStateChanged í›„ ëŒ“ê¸€ ì‚­ì œ ë²„íŠ¼ ì¬ë Œë” */
      function refreshCommentListWithDeleteFlag() {
        if (!currentDetailPostId || !document.getElementById('comment-list')) return;
        window.app.getComments(currentDetailPostId, function(_, comments) {
          window.app.renderComments('comment-list', comments, { postId: currentDetailPostId, canDelete: window.app.isOperator && window.app.isOperator() });
          var ce = document.getElementById('comment-count');
          if (ce) ce.textContent = comments ? comments.length : 0;
        });
      }
      window.addEventListener('authStateChanged', refreshCommentListWithDeleteFlag);

      /* â”€â”€ ìƒì„¸ ë³´ê¸° â”€â”€ */
      if (postId) {
        renderLoading();
        setListUI(false);
        var post = window.app.getLocalPostById(postId);
        if (!post) {
          var MOCK = [
            { id: '1', title: 'PGì‚¬ í† ìŠ¤ vs ì´ë‹ˆì‹œìŠ¤ vs ë‚˜ì´ìŠ¤ ìˆ˜ìˆ˜ë£Œ ë¹„êµ í›„ê¸° ìˆì–´ìš”', author: 'ê°€ë§¹ì ì£¼', date: '2ì‹œê°„ ì „', body: 'ê° PGì‚¬ ìˆ˜ìˆ˜ë£Œ ë¹„êµí•´ ë³´ì‹  ë¶„ë“¤ í›„ê¸° ê³µìœ í•´ ì£¼ì„¸ìš”.\n\nì €ëŠ” í† ìŠ¤ ì“°ê³  ìˆëŠ”ë° ì—°íšŒë¹„ 11ë§Œì›ì— ì¹´ë“œ 3.4%ë¼ ë¶€ë‹´ë˜ë„¤ìš”. ì´ë‹ˆì‹œìŠ¤ëŠ” ì—°íšŒë¹„ ë©´ì œë¼ ë°”ê¿€ê¹Œ ê³ ë¯¼ ì¤‘ì´ì—ìš”.', verified: false },
            { id: '2', title: 'ì‡¼í•‘ëª° ì˜¤í”ˆ 3ê°œì›” ì°¨, ì •ì‚° ì¼ì • D+5ë©´ ê´œì°®ì„ê¹Œìš”?', author: 'ì´ˆë³´ì‚¬ì¥', date: '5ì‹œê°„ ì „', body: 'ì •ì‚°ì´ D+5ì¸ PGì‚¬ ê³ ë ¤ ì¤‘ì¸ë°, ìê¸ˆ íšŒì „ì— ë¬´ë¦¬ê°€ ì—†ì„ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤.', verified: false },
            { id: '3', title: 'ì „ìì„¸ê¸ˆê³„ì‚°ì„œ ìë™ ë°œí–‰ ì—°ë™ PG ì¶”ì²œ ë¶€íƒë“œë ¤ìš”', author: 'íšŒì›', date: 'ì–´ì œ', body: 'ì „ìì„¸ê¸ˆê³„ì‚°ì„œ ìë™ ë°œí–‰ ì˜ ë˜ëŠ” PG ì¶”ì²œí•´ ì£¼ì„¸ìš”.', verified: false },
            { id: '4', title: 'ê²°ì œ ì˜¤ë¥˜ ì‹œ PGì‚¬ ëŒ€ì‘ íŒ ê³µìœ í•©ë‹ˆë‹¤', author: 'ìš´ì˜ì', date: '2ì¼ ì „', body: 'ê²°ì œ ì˜¤ë¥˜ ë°œìƒ ì‹œ PGì‚¬ ê³ ê°ì„¼í„° ì—°ë½ ìš”ë ¹, ë¡œê·¸ í™•ì¸ ë°©ë²• ë“±ì„ ì •ë¦¬í•´ ë‘ì—ˆì–´ìš”.', verified: true },
            { id: '5', title: 'ì˜ì„¸ì‚¬ì—…ì ìˆ˜ìˆ˜ë£Œ ìš°ëŒ€ ë°›ì€ ë¶„ ê³„ì‹ ê°€ìš”?', author: 'ê°€ë§¹ì ì£¼', date: '3ì¼ ì „', body: 'ì˜ì„¸ì‚¬ì—…ìë¡œ ìˆ˜ìˆ˜ë£Œ ìš°ëŒ€ ë°›ê³  ê³„ì‹  ë¶„ í›„ê¸° ë¶€íƒë“œë ¤ìš”.', verified: false }
          ];
          post = MOCK.filter(function(p) { return p.id === postId; })[0];
        }
        if (post) {
          if (window.app && window.app.incrementPostViews) window.app.incrementPostViews(postId);
          renderDetail(post);
        } else {
          renderNotFound();
        }
        return;
      }

      /* â”€â”€ ëª©ë¡ ë³´ê¸° â”€â”€ */
      var board = params.get('board') || 'all';
      var searchQ = params.get('q') || '';
      var sortBy = params.get('sort') || 'latest';
      document.querySelectorAll('.board-tabs a').forEach(function(a) {
        a.classList.remove('active');
        var href = a.getAttribute('href') || '';
        if (board === 'all' && href === 'community.html') a.classList.add('active');
        else if (href.indexOf('board=' + board) !== -1) a.classList.add('active');
      });
      var searchInput = document.getElementById('board-search-input');
      var searchBtn   = document.getElementById('board-search-btn');
      var sortSelect  = document.getElementById('board-sort-select');
      var noticeEl    = document.getElementById('board-notice');
      if (searchInput) searchInput.value = searchQ;
      if (sortSelect)  sortSelect.value  = sortBy;

      var allFilteredItems = [];
      var currentShown = 0;
      var PAGE_SIZE = 20;

      function applyFilterAndSort(items) {
        if (!items) return [];
        var q = searchInput && searchInput.value ? searchInput.value.trim().toLowerCase() : '';
        var list = q ? items.filter(function(p) { return (p.title||'').toLowerCase().indexOf(q)!==-1||(p.body||'').toLowerCase().indexOf(q)!==-1; }) : items.slice();
        var s = (sortSelect && sortSelect.value) || 'latest';
        if (s === 'hits') list.sort(function(a,b){ return (b.hits||0)-(a.hits||0); });
        return list;
      }

      function renderPage() {
        var toShow = allFilteredItems.slice(0, currentShown);
        var hasMore = currentShown < allFilteredItems.length;
        setListUI(true);
        if (!toShow.length) { renderEmpty(); return; }
        renderList(toShow, hasMore);
        if (window.app && window.app.renderPosts) {
          window.app.renderPosts('community-list', toShow, 'community.html?id=', true);
        }
      }

      function loadList(append) {
        if (!append) renderLoading();
        setListUI(true);
        window.app.fetchPosts(board, 500, 0, function(err, items) {
          if (err) { setListUI(true); renderError(err); return; }
          allFilteredItems = applyFilterAndSort(items || []);
          if (!append) currentShown = Math.min(PAGE_SIZE, allFilteredItems.length);
          else currentShown = Math.min(currentShown + PAGE_SIZE, allFilteredItems.length);
          renderPage();
        });
      }

      if (searchBtn && searchInput) {
        searchBtn.onclick = function() {
          var q = searchInput.value.trim();
          var url = 'community.html?board=' + (board||'all');
          if (q) url += '&q=' + encodeURIComponent(q);
          if (sortSelect && sortSelect.value) url += '&sort=' + sortSelect.value;
          location.href = url;
        };
        searchInput.onkeydown = function(e) { if (e.key === 'Enter') searchBtn.click(); };
      }
      if (sortSelect) {
        sortSelect.onchange = function() {
          allFilteredItems = applyFilterAndSort(allFilteredItems);
          currentShown = Math.min(PAGE_SIZE, allFilteredItems.length);
          renderPage();
        };
      }

      loadList(false);

      if (noticeEl && window.app.getNoticePosts) {
        window.app.getNoticePosts(board, function(err, notices) {
          if (notices && notices.length) {
            noticeEl.style.display = 'block';
            noticeEl.innerHTML = notices.map(function(n) {
              return '<a href="community.html?id=' + (n.id||'') + '" class="board-notice-item"><span class="board-notice-label">ê³µì§€</span> ' + (n.title||'') + '</a>';
            }).join('');
          }
        });
      }
      loadPopularPosts();
    })();

    function loadPopularPosts() {
      if (!window.app || !window.app.fetchPosts) return;
      window.app.fetchPosts('all', 100, 0, function(err, items) {
        if (err || !items || !items.length) return;
        var popular = items.sort(function(a,b){ return ((b.hits||0)+(b.commentCount||0)*3)-((a.hits||0)+(a.commentCount||0)*3); }).slice(0,5);
        var el = document.getElementById('popular-posts');
        if (!el) return;
        el.innerHTML = popular.map(function(p) {
          var t = (p.title||'').slice(0,30);
          var m = 'ì¡°íšŒ ' + (p.hits||0) + (p.commentCount ? ' Â· ëŒ“ê¸€ ' + p.commentCount : '');
          return '<li class="sidebar-item"><a href="community.html?id=' + p.id + '" class="sidebar-link"><span class="sidebar-title">' + t + '</span><span class="sidebar-meta">' + m + '</span></a></li>';
        }).join('');
      });
    }
  </script>
  <!-- ëª¨ë°”ì¼ í”Œë¡œíŒ… ê¸€ì“°ê¸° ë²„íŠ¼ -->
  <a href="write.html" class="fab-write" aria-label="ê¸€ì“°ê¸°">ï¼‹</a>
  <!-- ëª¨ë°”ì¼ ë“œë¡œì–´ -->
  <div id="drawerOverlay" hidden aria-hidden="true"></div>
  <aside id="mobileDrawer" hidden aria-hidden="true" role="dialog" aria-modal="true" aria-label="ë©”ë‰´">
    <div class="drawer-header">
      <span class="drawer-logo">ê°€ë§¹ì ìˆ²</span>
      <button type="button" class="drawer-close" aria-label="ë©”ë‰´ ë‹«ê¸°">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true"><path d="M4 4L16 16M16 4L4 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
    </div>
    <nav class="drawer-nav" aria-label="ëª¨ë°”ì¼ ë©”ë‰´">
      <a href="community.html"  class="drawer-link active">ì»¤ë®¤ë‹ˆí‹°</a>
      <a href="pg.html"         class="drawer-link">PG ìˆ˜ìˆ˜ë£Œ í‘œ</a>
      <a href="calculator.html" class="drawer-link">ìˆ˜ìˆ˜ë£Œ ê³„ì‚°ê¸°</a>
      <a href="news.html"       class="drawer-link">ë‰´ìŠ¤</a>
      <a href="verify.html"     class="drawer-link">ì¸ì¦/ë¬¸ì˜</a>
    </nav>
    <div class="drawer-auth" id="drawerAuth">
      <p class="drawer-auth-label">ê³„ì •</p>
      <button type="button" class="drawer-auth-btn" data-auth="login">ë¡œê·¸ì¸</button>
      <button type="button" class="drawer-auth-btn drawer-auth-btn--primary" data-auth="signup">íšŒì›ê°€ì…</button>
    </div>
  </aside>
  <script src="js/drawer.js"></script>
</body>
</html>
